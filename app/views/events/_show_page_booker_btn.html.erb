<% if (@event.user != current_user) && (!(@event.bookings.select { |booking| booking.user == current_user }.empty?)) %>
  <button class="btn btn-warning">Attending</button>
  <%= link_to "Let's talk!", event_chatroom_path(@event.id, @event.chatroom.id), class:"btn btn-primary" %>
  <%= link_to "View my bookings", dashboard_path(@event.id, @event.chatroom.id), class:"btn btn-primary" %>
<% elsif @event.user == current_user %>
  <%= link_to "Delete event", event_path(@event.id), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this event?"}, class:"btn btn-primary" %>
  <%= link_to "Edit event", edit_event_path(@event.id), class:"btn btn-primary" %>
  <%= link_to "Let's talk!", event_chatroom_path(@event.id, @event.chatroom.id), class:"btn btn-primary" %>
<% elsif (@event.user != current_user) && (@event.attendees == @event.capacity) %>
  <button class="btn btn-warning">Join the waiting list</button>
<% elsif @event.user != current_user %>
  <%= link_to "I'm going!", event_bookings_path(@event.id), class:"btn btn-primary", data: {turbo_method: :post} %>
<% end %>
